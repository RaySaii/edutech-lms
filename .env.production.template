# EduTech LMS - Production Environment Configuration Template
# Copy this file to .env.production and update all values with your production settings

# =============================
# DATABASE CONFIGURATION
# =============================
DB_HOST=your-production-db-host
DB_PORT=5432
DB_USERNAME=edutech_lms_user
DB_PASSWORD=your-super-secure-database-password
DB_NAME=edutech_lms_production
DB_SSL=true
DB_SYNCHRONIZE=false
DB_LOGGING=false

# =============================
# REDIS CONFIGURATION
# =============================
REDIS_HOST=your-production-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=your-super-secure-redis-password
REDIS_TLS=true
REDIS_DB=0

# =============================
# JWT CONFIGURATION
# =============================
# Generate strong secrets: openssl rand -base64 64
JWT_ACCESS_SECRET=your-super-secret-access-key-minimum-64-characters-long
JWT_REFRESH_SECRET=your-super-secret-refresh-key-minimum-64-characters-long
JWT_ACCESS_EXPIRES=15m
JWT_REFRESH_EXPIRES=7d
JWT_ISSUER=edutech-lms-production
JWT_AUDIENCE=edutech-lms-users

# =============================
# SECURITY CONFIGURATION
# =============================
# Strong password requirements
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true

# Rate limiting (requests per time window)
RATE_LIMIT_LOGIN_WINDOW_MS=900000
RATE_LIMIT_LOGIN_MAX_ATTEMPTS=5
RATE_LIMIT_REGISTRATION_WINDOW_MS=3600000
RATE_LIMIT_REGISTRATION_MAX_ATTEMPTS=3
RATE_LIMIT_PASSWORD_RESET_WINDOW_MS=3600000
RATE_LIMIT_PASSWORD_RESET_MAX_ATTEMPTS=3

# Session security
SESSION_TIMEOUT_MINUTES=30
CONCURRENT_SESSIONS_LIMIT=3
FORCE_LOGOUT_INACTIVE_SESSIONS=true

# =============================
# EMAIL CONFIGURATION
# =============================
SMTP_HOST=your-smtp-host
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your-smtp-username
SMTP_PASSWORD=your-smtp-password
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=EduTech LMS

# Email verification settings
EMAIL_VERIFICATION_EXPIRES=24h
PASSWORD_RESET_EXPIRES=1h
EMAIL_VERIFICATION_REQUIRED=true

# =============================
# MICROSERVICES CONFIGURATION
# =============================
# API Gateway
API_GATEWAY_HOST=0.0.0.0
API_GATEWAY_PORT=3000

# Auth Service
AUTH_SERVICE_HOST=localhost
AUTH_SERVICE_PORT=3001

# Course Service
COURSE_SERVICE_HOST=localhost
COURSE_SERVICE_PORT=3002

# User Service
USER_SERVICE_HOST=localhost
USER_SERVICE_PORT=3003

# Notification Service
NOTIFICATION_SERVICE_HOST=localhost
NOTIFICATION_SERVICE_PORT=3004

# Analytics Service
ANALYTICS_SERVICE_HOST=localhost
ANALYTICS_SERVICE_PORT=3005

# =============================
# MESSAGE QUEUE CONFIGURATION
# =============================
RABBITMQ_URL=amqp://your-rabbitmq-user:your-rabbitmq-password@your-rabbitmq-host:5672
QUEUE_PREFIX=edutech_lms_prod

# =============================
# SECURITY HEADERS & CORS
# =============================
CORS_ORIGIN=https://yourdomain.com,https://app.yourdomain.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# Security headers
HELMET_CONTENT_SECURITY_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'
HELMET_HSTS_MAX_AGE=31536000
HELMET_HSTS_INCLUDE_SUBDOMAINS=true

# =============================
# LOGGING & MONITORING
# =============================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/edutech-lms
LOG_MAX_FILES=10
LOG_MAX_SIZE=10m

# Health check configuration
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# =============================
# FILE UPLOAD SECURITY
# =============================
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf,text/plain
UPLOAD_PATH=/secure/uploads
VIRUS_SCAN_ENABLED=true

# =============================
# TWO-FACTOR AUTHENTICATION
# =============================
TWO_FACTOR_ISSUER=EduTech LMS Production
TWO_FACTOR_BACKUP_CODES_COUNT=10
TWO_FACTOR_WINDOW=2

# =============================
# API SECURITY
# =============================
API_KEY_HEADER=X-API-Key
API_RATE_LIMIT_GLOBAL=1000
API_RATE_LIMIT_WINDOW=3600000
REQUEST_TIMEOUT=30000

# =============================
# ENCRYPTION KEYS
# =============================
# Generate: openssl rand -base64 32
ENCRYPTION_KEY=your-encryption-key-for-sensitive-data
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key

# =============================
# EXTERNAL SERVICES
# =============================
# Payment processing (if applicable)
STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_key
STRIPE_SECRET_KEY=sk_live_your_stripe_secret
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Cloud storage (if applicable)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-s3-bucket-name

# =============================
# ENVIRONMENT IDENTIFICATION
# =============================
NODE_ENV=production
APP_ENV=production
APP_NAME=EduTech LMS
APP_VERSION=1.0.0
APP_URL=https://yourdomain.com

# =============================
# IMPORTANT SECURITY NOTES
# =============================
# 1. Never commit this file with real values to version control
# 2. Use a secrets management service (AWS Secrets Manager, HashiCorp Vault, etc.)
# 3. Rotate all secrets regularly (minimum every 90 days)
# 4. Use different secrets for each environment
# 5. Implement secret scanning in your CI/CD pipeline
# 6. Monitor for unauthorized access to environment variables
# 7. Use encrypted communication between all services
# 8. Implement proper backup and disaster recovery for secrets